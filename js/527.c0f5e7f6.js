"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[527],{6527:function(t,a,e){e.r(a),e.d(a,{default:function(){return F}});var s=e(6252),l=e(9963),c=e(3577);const o={class:"container"},i=(0,s._)("h3",{class:"h3 text-center mt-4"},"購物車",-1),n={class:"text-end"},d=["disabled"],r={class:"table align-middle"},u=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th"),(0,s._)("th",null,"品名"),(0,s._)("th",{style:{width:"150px"}},"數量/單位"),(0,s._)("th",null,"單價")])],-1),h=["disabled","onClick"],p={class:"fas fa-spinner fa-pulse"},_=(0,s.Uk)(" x "),g={key:0,class:"text-success"},m={class:"input-group input-group-sm"},b={class:"input-group mb-3"},x=["onUpdate:modelValue","disabled","onChange"],y=["value"],f={class:"input-group-text",id:"basic-addon2"},k={class:"text-end"},v={class:"row justify-content-center"},w={key:0,class:"col-md-6"},C={class:"col-md-6 text-center"},D={key:0,class:"text-success"},q=(0,s._)("td",{colspan:"3",class:"text-end"},"總計",-1),L={class:"text-end"},$={key:0},U=(0,s._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),z={class:"text-end text-success"},I=(0,s._)("div",{class:"row justify-content-center"},[(0,s._)("p",{class:"h5 text-danger col-md-12 col-sm-6"},"大大大優惠!!"),(0,s._)("p",{class:"h6 col-md-12 col-sm-6 mb-5"},[(0,s.Uk)(" 輸入折扣碼 "),(0,s._)("b",{class:"text-success"},"big777"),(0,s.Uk)(" 即可享有77折優惠 ")])],-1),A={class:"row input-group"},V=(0,s._)("label",{for:"codeInput",class:"col-md-3 form-label text-center"},"折扣碼",-1);function j(t,a,e,j,H,K){return(0,s.wg)(),(0,s.iD)("div",o,[i,(0,s._)("div",n,[(0,s._)("button",{class:"btn btn-outline-danger",disabled:""!==H.isLoading,type:"button",onClick:a[0]||(a[0]=(...t)=>K.clearAllCart&&K.clearAllCart(...t))}," 清空購物車 ",8,d)]),(0,s._)("table",r,[u,(0,s._)("tbody",null,[H.cartData.carts?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(H.cartData.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,[(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:H.isLoading===t.id,onClick:a=>K.removeCartItem(t.id)},[(0,s.wy)((0,s._)("i",p,null,512),[[l.F8,H.isLoading===t.id]]),_],8,h)]),(0,s._)("td",null,[(0,s.Uk)((0,c.zw)(t.product.title)+" ",1),t.final_total!==t.total?((0,s.wg)(),(0,s.iD)("div",g," 已套用優惠券 ")):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s._)("div",m,[(0,s._)("div",b,[(0,s.wy)((0,s._)("select",{id:"cartNum",class:"form-select","onUpdate:modelValue":a=>t.qty=a,disabled:H.isLoading===t.id,onChange:a=>K.updateCartItem(t)},[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(20,(a=>(0,s._)("option",{value:a,key:`${a}${t.id}`},(0,c.zw)(a),9,y))),64))],40,x),[[l.bM,t.qty]]),(0,s._)("span",f,(0,c.zw)(t.product.unit),1)])])]),(0,s._)("td",k,[(0,s._)("div",v,[t.final_total!==t.total?((0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("del",null,"原價 : "+(0,c.zw)(t.total),1)])):(0,s.kq)("",!0),(0,s._)("div",C,[t.final_total!==t.total?((0,s.wg)(),(0,s.iD)("small",D,"折扣價：")):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,c.zw)(t.final_total),1)])])])])))),128)):(0,s.kq)("",!0)]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[q,(0,s._)("td",L,(0,c.zw)(H.cartData.total),1)]),H.cartData.final_total!==H.cartData.total?((0,s.wg)(),(0,s.iD)("tr",$,[U,(0,s._)("td",z,(0,c.zw)(H.cartData.final_total),1)])):(0,s.kq)("",!0)])]),I,(0,s._)("div",A,[V,(0,s.wy)((0,s._)("input",{type:"text",class:"col-md-3 mb-3 form-control",id:"codeInput","onUpdate:modelValue":a[1]||(a[1]=t=>H.code=t)},null,512),[[l.nr,H.code]]),(0,s._)("button",{type:"button",class:"col-md-3 mb-3 btn btn-outline-success",onClick:a[2]||(a[2]=(...t)=>K.useCoupon&&K.useCoupon(...t))}," 使用折扣碼 ")])])}var H={data(){return{code:"",isLoading:"",qty:1,cartData:[]}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/cart";this.$http.get(t).then((t=>{this.cartData=t.data.data})).catch((t=>{alert(t.data.message)}))},updateCartItem(t){const a=`https://vue3-course-api.hexschool.io/v2/api/hyxfish27/cart/${t.id}`,e={product_id:t.id,qty:t.qty};this.$http.put(a,{data:e}).then((t=>{alert(t.data.message),this.getCart()})).catch((t=>{alert(t.data.message)}))},removeCartItem(t){const a=`https://vue3-course-api.hexschool.io/v2/api/hyxfish27/cart/${t}`;this.isLoading=t,this.$http.delete(a).then((t=>{alert(t.data.message),this.getCart(),this.isLoading=""})).catch((t=>{alert(t.data.message)}))},clearAllCart(){const t="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/carts";this.isLoading="clear",this.$http.delete(t).then((t=>{alert(t.data.message),this.getCart(),this.isLoading=""})).catch((t=>{alert(t.data.message)}))},useCoupon(){const t=this.code,a="https://vue3-course-api.hexschool.io/v2/api/hyxfish27/coupon";this.$http.post(a,{data:{code:t}}).then((t=>{alert(t.data.message),this.getCart()})).catch((t=>{alert(t.data.message)}))}},mounted(){this.getCart()}},K=e(3744);const Y=(0,K.Z)(H,[["render",j]]);var F=Y}}]);
//# sourceMappingURL=527.c0f5e7f6.js.map