{"version":3,"file":"js/527.c0f5e7f6.js","mappings":"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","sources":["webpack://week6/./src/views/CartView.vue","webpack://week6/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h3 class=\"h3 text-center mt-4\">購物車</h3>\r\n    <div class=\"text-end\">\r\n      <button\r\n        class=\"btn btn-outline-danger\"\r\n        :disabled=\"isLoading !== ''\"\r\n        type=\"button\"\r\n        @click=\"clearAllCart\"\r\n      >\r\n        清空購物車\r\n      </button>\r\n    </div>\r\n    <table class=\"table align-middle\">\r\n      <thead>\r\n        <tr>\r\n          <th></th>\r\n          <th>品名</th>\r\n          <th style=\"width: 150px\">數量/單位</th>\r\n          <th>單價</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <template v-if=\"cartData.carts\">\r\n          <tr v-for=\"cart in cartData.carts\" :key=\"cart.id\">\r\n            <td>\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-outline-danger btn-sm\"\r\n                :disabled=\"isLoading === cart.id\"\r\n                @click=\"removeCartItem(cart.id)\"\r\n              >\r\n                <i\r\n                  class=\"fas fa-spinner fa-pulse\"\r\n                  v-show=\"isLoading === cart.id\"\r\n                ></i>\r\n                x\r\n              </button>\r\n            </td>\r\n            <td>\r\n              {{ cart.product.title }}\r\n              <div class=\"text-success\" v-if=\"cart.final_total !== cart.total\">\r\n                已套用優惠券\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div class=\"input-group input-group-sm\">\r\n                <div class=\"input-group mb-3\">\r\n                  <!-- <input min=\"1\" type=\"number\" class=\"form-control\" :value=\"cart.qty\"> -->\r\n                  <!-- 不要相信使用者->用選的就不會出錯 -->\r\n                  <select\r\n                    id=\"cartNum\"\r\n                    class=\"form-select\"\r\n                    v-model=\"cart.qty\"\r\n                    :disabled=\"isLoading === cart.id\"\r\n                    @change=\"updateCartItem(cart)\"\r\n                  >\r\n                    <option\r\n                      :value=\"num\"\r\n                      v-for=\"num in 20\"\r\n                      :key=\"`${num}${cart.id}`\"\r\n                      >{{ num }}\r\n                    </option>\r\n                  </select>\r\n                  <span class=\"input-group-text\" id=\"basic-addon2\">{{\r\n                    cart.product.unit\r\n                  }}</span>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td class=\"text-end\">\r\n              <div class=\"row justify-content-center\">\r\n                <div class=\"col-md-6\" v-if=\"cart.final_total !== cart.total\">\r\n                  <del>原價 : {{ cart.total }}</del>\r\n                </div>\r\n                <div class=\"col-md-6 text-center\">\r\n                  <small\r\n                    class=\"text-success\"\r\n                    v-if=\"cart.final_total !== cart.total\"\r\n                    >折扣價：</small\r\n                  >\r\n                  {{ cart.final_total }}\r\n                </div>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </template>\r\n      </tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <td colspan=\"3\" class=\"text-end\">總計</td>\r\n          <td class=\"text-end\">{{ cartData.total }}</td>\r\n        </tr>\r\n        <tr v-if=\"cartData.final_total !== cartData.total\">\r\n          <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\r\n          <td class=\"text-end text-success\">{{ cartData.final_total }}</td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n    <div class=\"row justify-content-center\">\r\n      <p class=\"h5 text-danger col-md-12 col-sm-6\">大大大優惠!!</p>\r\n      <p class=\"h6 col-md-12 col-sm-6 mb-5\">\r\n        輸入折扣碼 <b class=\"text-success\">big777</b> 即可享有77折優惠\r\n      </p>\r\n    </div>\r\n\r\n    <div class=\"row input-group\">\r\n      <label for=\"codeInput\" class=\"col-md-3 form-label text-center\"\r\n        >折扣碼</label\r\n      >\r\n      <input\r\n        type=\"text\"\r\n        class=\"col-md-3 mb-3 form-control\"\r\n        id=\"codeInput\"\r\n        v-model=\"code\"\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        class=\"col-md-3 mb-3 btn btn-outline-success\"\r\n        @click=\"useCoupon\"\r\n      >\r\n        使用折扣碼\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      code: '',\r\n      isLoading: '',\r\n      qty: 1,\r\n      cartData: []\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http\r\n        .get(url)\r\n        .then(res => {\r\n          // console.log(res)\r\n          this.cartData = res.data.data\r\n        })\r\n        .catch(err => {\r\n          alert(err.data.message)\r\n        })\r\n    },\r\n    updateCartItem (cart) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${cart.id}`\r\n      const update = {\r\n        product_id: cart.id,\r\n        qty: cart.qty\r\n      }\r\n      this.$http\r\n        .put(url, { data: update })\r\n        .then(res => {\r\n          alert(res.data.message)\r\n          this.getCart()\r\n        })\r\n        .catch(err => {\r\n          alert(err.data.message)\r\n        })\r\n    },\r\n    removeCartItem (cartID) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${cartID}`\r\n      this.isLoading = cartID\r\n      this.$http\r\n        .delete(url)\r\n        .then(res => {\r\n          // console.log(res)\r\n          alert(res.data.message)\r\n          this.getCart()\r\n          this.isLoading = ''\r\n        })\r\n        .catch(err => {\r\n          alert(err.data.message)\r\n        })\r\n    },\r\n    clearAllCart () {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`\r\n      this.isLoading = 'clear'\r\n      this.$http\r\n        .delete(url)\r\n        .then(res => {\r\n          alert(res.data.message)\r\n          this.getCart()\r\n          this.isLoading = ''\r\n        })\r\n        .catch(err => {\r\n          alert(err.data.message)\r\n        })\r\n    },\r\n    useCoupon () {\r\n      const code = this.code\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`\r\n      this.$http\r\n        .post(url, { data: { code } })\r\n        .then(res => {\r\n          alert(res.data.message)\r\n          this.getCart()\r\n        })\r\n        .catch(err => {\r\n          alert(err.data.message)\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartView.vue?vue&type=template&id=c84c72b0\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\VICKY HUANG\\\\Projects\\\\hex-vue-project-week6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","id","colspan","for","_createElementBlock","_hoisted_2","disabled","$data","type","onClick","$options","_hoisted_4","_hoisted_6","carts","_Fragment","key","_renderList","cart","product","title","final_total","total","qty","$event","onChange","num","value","_hoisted_14","_toDisplayString","unit","_hoisted_21","_hoisted_23","_hoisted_24","_hoisted_26","_hoisted_28","data","code","isLoading","cartData","methods","getCart","url","this","$http","get","then","res","catch","err","alert","message","updateCartItem","update","product_id","put","removeCartItem","cartID","delete","clearAllCart","useCoupon","post","mounted","__exports__","render"],"sourceRoot":""}